{% if include.context == 'feed' %}{% assign article = post %}{% else %}{% assign article = page %}{% endif %}
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "{% if article.category == 'blog' %}BlogPosting{% else %}NewsArticle{% endif %}",
  "headline": "{{ article.title }}",{% if article.featured_image %}
  "image": "{{ site.url }}/wp-content/uploads/{{ article.featured_image }}"{% endif %}
  "datePublished": "{{ article.date | date_to_xmlschema }}",
  "description": "{% if article.digest %}{{ article.digest | strip_html }}{% elsif article.excerpt %}{{ article.excerpt | strip_html | truncate: 159, 'â€¦' }}{% else %}{{ site.description }}{% endif %}",
  "author": "{{ site.url }}/bio/"{% if article.tags %},
  "keywords": "{% for tag in article.tags %}{{ tag }}{% unless forloop.last %}, {% endunless %}{% endfor %}"{% endif %}
}
</script>
